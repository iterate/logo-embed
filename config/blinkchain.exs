use Mix.Config

linear = 0..255 |> Enum.to_list()

gamma = [
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  6,
  6,
  6,
  6,
  7,
  7,
  7,
  7,
  8,
  8,
  8,
  9,
  9,
  9,
  10,
  10,
  10,
  11,
  11,
  11,
  12,
  12,
  13,
  13,
  13,
  14,
  14,
  15,
  15,
  16,
  16,
  17,
  17,
  18,
  18,
  19,
  19,
  20,
  20,
  21,
  21,
  22,
  22,
  23,
  24,
  24,
  25,
  25,
  26,
  27,
  27,
  28,
  29,
  29,
  30,
  31,
  32,
  32,
  33,
  34,
  35,
  35,
  36,
  37,
  38,
  39,
  39,
  40,
  41,
  42,
  43,
  44,
  45,
  46,
  47,
  48,
  49,
  50,
  50,
  51,
  52,
  54,
  55,
  56,
  57,
  58,
  59,
  60,
  61,
  62,
  63,
  64,
  66,
  67,
  68,
  69,
  70,
  72,
  73,
  74,
  75,
  77,
  78,
  79,
  81,
  82,
  83,
  85,
  86,
  87,
  89,
  90,
  92,
  93,
  95,
  96,
  98,
  99,
  101,
  102,
  104,
  105,
  107,
  109,
  110,
  112,
  114,
  115,
  117,
  119,
  120,
  122,
  124,
  126,
  127,
  129,
  131,
  133,
  135,
  137,
  138,
  140,
  142,
  144,
  146,
  148,
  150,
  152,
  154,
  156,
  158,
  160,
  162,
  164,
  167,
  169,
  171,
  173,
  175,
  177,
  180,
  182,
  184,
  186,
  189,
  191,
  193,
  196,
  198,
  200,
  203,
  205,
  208,
  210,
  213,
  215,
  218,
  220,
  223,
  225,
  228,
  231,
  233,
  236,
  239,
  241,
  244,
  247,
  249,
  252,
  255
]

channel0 = [
  # 0
  {0, 0},
  {1, 0},
  {1, 1},
  {2, 1},
  {1, 2},
  {0, 2},
  {0, 3},
  {1, 3},
  {2, 3},
  {3, 3},
  # 10
  {4, 3},
  {5, 3},
  {4, 2},
  {4, 1},
  {5, 1},
  {6, 1},
  {6, 2},
  {7, 3},
  {7, 2},
  {7, 1},
  # 20
  {8, 1},
  {9, 1}
]

channel1 = [
  # 22
  {10, 2},
  {10, 3},
  {11, 3},
  {12, 3},
  {12, 2},
  {12, 1},
  {11, 1},
  {13, 1},
  # 30
  {13, 0},
  {13, 2},
  {13, 3},
  {14, 1},
  {14, 3},
  {15, 3},
  {16, 3},
  {17, 3},
  {16, 2},
  {16, 1},
  {17, 1},
  {18, 1},
  {18, 2}
]

config :blinkchain, dma_channel: 10
config :blinkchain, canvas: {8 * 19, 8 * 4}

config :blinkchain, :channel0,
  pin: 18,
  type: :grb,
  brightness: 128,
  gamma: linear,
  arrangement:
    for(
      {x, y} <- channel0,
      do: %{
        type: :matrix,
        origin: {x * 8, y * 8},
        count: {8, 8},
        direction: {:right, :down},
        progressive: true
      }
    )

config :blinkchain, :channel1,
  pin: 13,
  type: :grb,
  brightness: 128,
  gamma: gamma,
  arrangement:
    for(
      {x, y} <- channel1,
      do: %{
        type: :matrix,
        origin: {x * 8, y * 8},
        count: {8, 8},
        direction: {:right, :down},
        progressive: true
      }
    )
